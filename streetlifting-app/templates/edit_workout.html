<!DOCTYPE html>
{% extends "general/base.html" %} {% block title %}Editar Entrenamiento: {{
day_type }}{% endblock %} {% block content %}
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="../static/style.css" />
		<script
			src="{{ url_for('static', filename='js/editWorkout.js') }}"
			defer
		></script>
		<title>Editar Entrenamiento: {{ day_type }}</title>

		<style>
			html,
			body {
				margin: 0;
				padding: 0;
				overflow-x: hidden;
				max-width: 100vw;
			}

			.exercise-container {
				border: 1px solid #444;
				margin-bottom: 1em;
				padding: 1em;
				border-radius: 8px;
				background-color: #1a1a1a;
			}

			.save-button,
			.cancel-button {
				font-size: 0.9em;
				padding: 10px;
				margin-top: 10px;
				width: 48%;
				cursor: pointer;
				border: none;
				border-radius: 5px;
			}

			.save-button {
				background-color: #4caf50;
				color: white;
			}

			.cancel-button {
				background-color: #f44336;
				color: white;
			}

			@media (max-width: 768px) {
				th,
				td,
				.save-button,
				.cancel-button {
					font-size: 0.8em;
				}
			}
		</style>
	</head>
	<body>
		<main>
			<h1>Editar Entrenamiento: {{ day_type }}</h1>

			<form
				id="workoutForm"
				method="POST"
				aria-labelledby="form-title"
				data-workout-id="{{ workout.id }}"
				data-day-type="{{ day_type }}"
			>
				<input type="hidden" name="workout_id" value="{{ workout.id }}" />

				<input
					type="hidden"
					id="day_type"
					name="day_type"
					value="{{ workout.day_type }}"
				/>

				<p>
					<label for="date">Fecha:</label>
					<input
						type="date"
						id="date"
						name="date"
						value="{{ workout.date }}"
						required
					/>
				</p>

				<div id="set-container">
					{% for ex in workout.exercises %} {% set safeName =
					ex.name|replace('(', '')|replace(')', '')|replace(' ', '_') %}
					<div
						id="exercise_{{ safeName }}"
						class="exercise-container"
						data-exercise="{{ safeName }}"
					>
						<input type="hidden" name="exercise_names" value="{{ safeName }}" />
						<button
							class="btn-secondary"
							type="button"
							onclick="removeExercise('${safeName}')"
						>
							Eliminar Ejercicio
						</button>

						<h3>{{ ex.name }}</h3>
						<table>
							<thead>
								<tr>
									<th>Peso (kg)</th>
									<th>Reps</th>
									<th>RPE</th>
									<th>Notas</th>
									<th>Completado</th>
									<th>Eliminar</th>
								</tr>
							</thead>
							<tbody id="sets_{{ safeName }}">
								{% for s in ex.sets %}
								<tr>
									<td>
										<input
											type="number"
											name="weight_{{ safeName }}[]"
											step="0.1"
											value="{{ s.weight }}"
											required
										/>
									</td>
									<td>
										<input
											type="number"
											name="reps_{{ safeName }}[]"
											value="{{ s.reps }}"
											required
										/>
									</td>
									<td>
										<input
											type="number"
											name="rpe_{{ safeName }}[]"
											step="0.1"
											value="{{ s.rpe }}"
										/>
									</td>
									<td>
										<input
											type="text"
											name="notes_{{ safeName }}[]"
											value="{{ s.notes }}"
										/>
									</td>
									<td>
										<input
											type="checkbox"
											name="completed_{{ safeName }}[]"
											value="true"
											{%
											if
											s.completed
											%}checked{%
											endif
											%}
										/>
									</td>
									<td>
										<button type="button" class="btn" onclick="removeSet(this)">
											Eliminar Serie
										</button>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
						<button
							type="button"
							class="btn"
							onclick="addSet('{{ safeName }}')"
						>
							Agregar Serie
						</button>
					</div>
					{% endfor %}
				</div>

				<h3>Agregar Ejercicio</h3>
				<select
					id="exercise-selector"
					aria-label="Selector de Ejercicios"
				></select>
				<button type="button" id="add-exercise-btn" class="btn">
					Agregar Ejercicio
				</button>
				<div class="button-container">
					<button type="submit" class="save-button">Guardar Cambios</button>
					<button type="button" id="cancel-workout" class="cancel-button">
						Cancelar
					</button>
				</div>
			</form>
		</main>
	</body>
</html>
{% endblock %}
