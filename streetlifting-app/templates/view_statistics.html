{% extends "general/base.html" %} {% block title %}Estadísticas - MPDS{%
endblock %} {% block content %}
<div class="statistics-container">
	<h1>Estadísticas de Entrenamiento</h1>

	<!-- Gráfico de Volumen Semanal -->
	<div class="chart-section">
		<h2>Volumen Semanal</h2>
		<canvas id="weekly-volume-chart"></canvas>
	</div>

	<!-- Gráfico de Progreso de 1RM -->
	<div class="chart-section">
		<h2>Progreso de 1RM</h2>
		<canvas id="one-rm-progress-chart"></canvas>
	</div>

	<!-- Resumen de Estadísticas -->
	<div class="stats-summary">
		<h2>Resumen</h2>
		<ul>
			<li>
				<strong>Total de entrenamientos registrados:</strong> {{ total_workouts
				}}
			</li>
			<li><strong>Volumen total levantado:</strong> {{ total_volume }} kg</li>
			<li>
				<strong>Mejoras en 1RM:</strong>
				<ul>
					{% for exercise, progress in one_rm_progress.items() %}
					<li>{{ exercise }}: +{{ progress }} kg</li>
					{% endfor %}
				</ul>
			</li>
		</ul>
	</div>
</div>

<!-- Scripts para gráficos -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
	document.addEventListener("DOMContentLoaded", function () {
	    // Datos para el gráfico de volumen semanal
	    const volumeData = {{ weekly_volume | tojson }};
	    const volumeCtx = document.getElementById("weekly-volume-chart").getContext("2d");
	    new Chart(volumeCtx, {
	        type: 'bar',
	        data: {
	            labels: volumeData.labels,
	            datasets: [{
	                label: 'Volumen Semanal (kg)',
	                data: volumeData.values,
	                backgroundColor: 'rgba(75, 192, 192, 0.2)',
	                borderColor: 'rgba(75, 192, 192, 1)',
	                borderWidth: 1
	            }]
	        },
	        options: {
	            responsive: true,
	            plugins: {
	                legend: { display: true },
	                title: { display: true, text: 'Volumen Semanal' }
	            },
	            scales: {
	                x: { title: { display: true, text: 'Semanas' } },
	                y: { title: { display: true, text: 'Volumen (kg)' } }
	            }
	        }
	    });

	    // Datos para el gráfico de progreso de 1RM
	    const oneRmData = {{ one_rm_history | tojson }};
	    const oneRmCtx = document.getElementById("one-rm-progress-chart").getContext("2d");
	    new Chart(oneRmCtx, {
	        type: 'line',
	        data: {
	            labels: oneRmData.labels,
	            datasets: [{
	                label: 'Progreso de 1RM (kg)',
	                data: oneRmData.values,
	                borderColor: 'rgba(255, 99, 132, 1)',
	                backgroundColor: 'rgba(255, 99, 132, 0.2)',
	                tension: 0.3,
	                fill: true
	            }]
	        },
	        options: {
	            responsive: true,
	            plugins: {
	                legend: { display: true },
	                title: { display: true, text: 'Progreso de 1RM' }
	            },
	            scales: {
	                x: { title: { display: true, text: 'Fechas' } },
	                y: { title: { display: true, text: '1RM (kg)' } }
	            }
	        }
	    });
	});
</script>
{% endblock %}
